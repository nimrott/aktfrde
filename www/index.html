<!DOCTYPE html>
<html>
        <head>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                <meta name="viewport" content="user-scalable=no, initial-scale=1, width=device-width" /><!-- Do not change this! -->

                <!-- Stylesheets -->
                <!-- jQuery and jQuery Mobile -->
                <link rel="stylesheet" type="text/css" href="./themes/AndroidHolo.min.css" /><!-- ThemeRoller theme -->
                <link rel="stylesheet" type="text/css" href="./themes/jquery.mobile.icons-1.4.2.min.css" />
                <link rel="stylesheet" type="text/css" href="./themes/jquery.mobile.structure-1.4.2.min.css" />

                <!-- jpHolo theme -->
                <link rel="stylesheet" type="text/css" href="./themes/jpholo.css" />
                <link rel="stylesheet" type="text/css" href="./themes/jpholo.splitview.css" />
                <link rel="stylesheet" type="text/css" href="./themes/jpholo.tablet.css" id="sizeStylesheet" />

                <!-- JavaScript -->

                <script type="text/javascript" src="cordova.js"></script>
                <script type="text/javascript" charset="utf-8" src="phonegap-3.6.3.js"></script>
                <!-- Cordova PhoneGap --><!-- exclude the scripts below if you are not deploying with PhoneGap -->
                <script type="text/javascript" src="./backgroundService-3.1.0.js"></script>
                <script type="text/javascript" src="./cordova_custom_plugins.js"></script>

                <!-- jQuery -->
                <script type="text/javascript" src="./js/jquery-2.1.1.min.js"></script>

                <!-- jQuery Mobile -->
                <script type="text/javascript" src="./js/jquery.mobile.settings.js"></script><!-- this must be loaded before jQuery Mobile -->
                <script type="text/javascript" src="./js/jquery.mobile-1.4.2.min.js"></script>

                <!-- Other frameworks -->
                <script type="text/javascript" src="./js/fastclick.js"></script><!-- for speeding op tap events, load this AFTER jQuery Mobile -->
                <script type="text/javascript" src="./js/i18next-1.7.3.min.js"></script><!-- for multi language -->
                <script type="text/javascript" src="./js/PushNotification.js"></script><!-- for PushPlugin Example -->

                <!-- Application -->
                <!-- Set document, used in jpholo.core.js -->
                <script type="text/javascript">
                        window.indexFile = "index.html";
                        window.phonegapExcluded = true; // set this value to either true or false, depending on if you load the Cordova PhoneGap scripts.
                </script>
                <!-- jpHolo core
                <script type="text/javascript" src="./js/jpholo.core.js"></script>
                <script type="text/javascript" src="./js/jpholo.core.services.js"></script>  -->
                <!-- your scripts -->

                <title>Aktienfreunde App</title>
    <style type="text/css">
        html, body { margin: 0; padding: 0; height: 100%; }
        iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            border: none; padding-top: 50px;
            box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;
        }
        body {
                 overflow:hidden;
                 }
#loader1 {
    position:absolute;
    left:45%;
    top:45%;
    border-radius:0px;
    padding:0px;
    border:0px solid #777777;
    box-shadow:0px 0px 0px #777777;
}
input.suche[type='text'] {
    /* You can set width to whatever you like */
    width: 150px;
    right: 150px;
    top:10px;
    font-family: "Roboto", "Droid Sans", sans-serif;
    font-size: 16px;
    margin: 0;
    padding: 8px 8px 6px 8px;
    position: fixed;
    display: block;
    outline: none;
    border: none;
    color: #ffffff;
    background: bottom left linear-gradient(#ffffff, #ffffff) no-repeat, bottom center linear-gradient(#ffffff, #ffffff) repeat-x, bottom right linear-gradient(#ffffff, #ffffff) no-repeat;
    background-size: 1px 6px, 1px 1px, 1px 6px;
}
input.suche[type='text']:hover, input.suche[type='text']:focus {
    background: bottom left linear-gradient(#ffffff, #ffffff) no-repeat, bottom center linear-gradient(#ffffff, #ffffff) repeat-x, bottom right linear-gradient(#ffffff, #ffffff) no-repeat;
    background-size: 1px 6px, 1px 1px, 1px 6px;

}
</style>
        </head>
        <body height:100%>
                <script type="text/javascript">
            var pushNotification;

            function onDeviceReady() {
                $("#app-status-ul").append('<li>deviceready event received</li>');

                                document.addEventListener("backbutton", function(e)
                                {
                        $("#app-status-ul").append('<li>backbutton event received</li>');

                                      if( $("#home").length > 0)
                                        {
                                                // call this to get a new token each time. don't call it to reuse existing token.
                                                //pushNotification.unregister(successHandler, errorHandler);
                                                e.preventDefault();
                                                navigator.app.exitApp();
                                        }
                                        else
                                        {
                                                navigator.app.backHistory();
                                        }
                                }, false);

                                try
                                {
                        pushNotification = window.plugins.pushNotification;
                      $("#app-status-ul").append('<li>registering ' + device.platform + '</li>');
                        if (device.platform == 'android' || device.platform == 'Android' ||
                            device.platform == 'amazon-fireos' ) {
                        pushNotification.register(successHandler, errorHandler, {"senderID":"325583734632","ecb":"onNotification"});                // required!
                                        } else {
                            pushNotification.register(tokenHandler, errorHandler, {"badge":"true","sound":"true","alert":"true","ecb":"onNotificationAPN"});        // required!
                        }
                }
                                catch(err)
                                {
                                        txt="There was an error on this page.\n\n";
                                        txt+="Error description: " + err.message + "\n\n";
                                        alert(txt);
                                }
            }

            // handle APNS notifications for iOS
            function onNotificationAPN(e) {
                if (e.alert) {
                     $("#app-status-ul").append('<li>push-notification: ' + e.alert + '</li>');
                     // showing an alert also requires the org.apache.cordova.dialogs plugin
                     navigator.notification.alert(e.alert);
                }

                if (e.sound) {
                    // playing a sound also requires the org.apache.cordova.media plugin
                    var snd = new Media(e.sound);
                    snd.play();
                }

                if (e.badge) {
                    pushNotification.setApplicationIconBadgeNumber(successHandler, e.badge);
                }
            }

            // handle GCM notifications for Android
            function onNotification(e) {
                $("#app-status-ul").append('<li>EVENT -> RECEIVED:' + e.event + '</li>');

                switch( e.event )
                {
                    case 'registered':
                                        if ( e.regid.length > 0 )
                                        {
                                                $("#app-status-ul").append('<li>REGISTERED -> REGID:' + e.regid + "</li>");
                                                // Your GCM push server needs to know the regID before it can push to this device
                                                // here is where you might want to send it the regID for later use.
                                                console.log("regID = " + e.regid);
                                        }
                    break;

                    case 'message':
                            // if this flag is set, this notification happened while we were in the foreground.
                            // you might want to play a sound to get the user's attention, throw up a dialog, etc.
                            if (e.foreground)
                            {
                                                        $("#app-status-ul").append('<li>--INLINE NOTIFICATION--' + '</li>');

                                                        // on Android soundname is outside the payload.
                                                        // On Amazon FireOS all custom attributes are contained within payload
                                                        var soundfile = e.soundname || e.payload.sound;
                                                        // if the notification contains a soundname, play it.
                                                        // playing a sound also requires the org.apache.cordova.media plugin
                                                        var my_media = new Media("/android_asset/www/"+ soundfile);

                                                        my_media.play();
                                                }
                                                else
                                                {        // otherwise we were launched because the user touched a notification in the notification tray.
                                                        if (e.coldstart)
                                                                $("#app-status-ul").append('<li>--COLDSTART NOTIFICATION--' + '</li>');
                                                        else
                                                        $("#app-status-ul").append('<li>--BACKGROUND NOTIFICATION--' + '</li>');
                                                }

                                                $("#app-status-ul").append('<li>MESSAGE -> MSG: ' + e.payload.message + '</li>');
                        //android only
                                                $("#app-status-ul").append('<li>MESSAGE -> MSGCNT: ' + e.payload.msgcnt + '</li>');
                        //amazon-fireos only
                        $("#app-status-ul").append('<li>MESSAGE -> TIMESTAMP: ' + e.payload.timeStamp + '</li>');
                    break;

                    case 'error':
                                                $("#app-status-ul").append('<li>ERROR -> MSG:' + e.msg + '</li>');
                    break;

                    default:
                                                $("#app-status-ul").append('<li>EVENT -> Unknown, an event was received and we do not know what it is</li>');
                    break;
                }
            }

            function tokenHandler (result) {
                $("#app-status-ul").append('<li>token: '+ result +'</li>');
                // Your iOS push server needs to know the token before it can push to this device
                // here is where you might want to send it the token for later use.
            }

            function successHandler (result) {
                $("#app-status-ul").append('<li>success:'+ result +'</li>');
            }

            function errorHandler (error) {
                $("#app-status-ul").append('<li>error:'+ error +'</li>');
            }

                        document.addEventListener('deviceready', onDeviceReady, true);

         </script>
                <div id="home">
                        <div id="app-status-div">
                                <ul id="app-status-ul">
                                        <li>Cordova PushNotification Plugin Demo</li>
                                </ul>
                        </div>
                </div>
        </body>

</html>